(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{478:function(t,a,s){"use strict";s.r(a);var v=s(6),n=Object(v.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"回流-重排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回流-重排"}},[t._v("#")]),t._v(" 回流（重排）")]),t._v(" "),s("p",[t._v("当render tree中的一部分(或全部)因为元素的 "),s("strong",[t._v("规模尺寸")]),t._v("，"),s("strong",[t._v("布局")]),t._v("，"),s("strong",[t._v("隐藏")]),t._v("等改变而需要重新构建。\n这就称为回流(reflow)。")]),t._v(" "),s("p",[t._v("当页面"),s("strong",[t._v("布局和几何属性")]),t._v("改变时就需要回流")]),t._v(" "),s("h2",{attrs:{id:"重绘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重绘"}},[t._v("#")]),t._v(" 重绘")]),t._v(" "),s("p",[t._v("当render tree中的一些元素需要更新属性，\n而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color。则就叫称为重绘。")]),t._v(" "),s("p",[t._v("回流必将引起重绘，而重绘不一定会引起回流")]),t._v(" "),s("h2",{attrs:{id:"触发页面重新布局的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#触发页面重新布局的属性"}},[t._v("#")]),t._v(" 触发页面重新布局的属性")]),t._v(" "),s("ol",[s("li",[t._v("盒子模型相关属性会触发重布局")]),t._v(" "),s("li",[t._v("定位属性及浮动也会触发重布局")]),t._v(" "),s("li",[t._v("改变节点内部文字结构也会触发重布局")])]),t._v(" "),s("p",[t._v("盒子模型相关属性")]),t._v(" "),s("ul",[s("li",[t._v("width")]),t._v(" "),s("li",[t._v("height")]),t._v(" "),s("li",[t._v("padding")]),t._v(" "),s("li",[t._v("margin")]),t._v(" "),s("li",[t._v("display")]),t._v(" "),s("li",[t._v("border-width")]),t._v(" "),s("li",[t._v("border")]),t._v(" "),s("li",[t._v("min-height")])]),t._v(" "),s("p",[t._v("定位属性及浮动")]),t._v(" "),s("ul",[s("li",[t._v("top")]),t._v(" "),s("li",[t._v("bottom")]),t._v(" "),s("li",[t._v("left")]),t._v(" "),s("li",[t._v("right")]),t._v(" "),s("li",[t._v("position")]),t._v(" "),s("li",[t._v("float")]),t._v(" "),s("li",[t._v("clear")])]),t._v(" "),s("p",[t._v("文字结构")]),t._v(" "),s("ul",[s("li",[t._v("text-align")]),t._v(" "),s("li",[t._v("overflow-y")]),t._v(" "),s("li",[t._v("font-weight")]),t._v(" "),s("li",[t._v("overflow")]),t._v(" "),s("li",[t._v("font-family")]),t._v(" "),s("li",[t._v("line-height")]),t._v(" "),s("li",[t._v("vertival-align")]),t._v(" "),s("li",[t._v("white-space")]),t._v(" "),s("li",[t._v("font-size")])]),t._v(" "),s("h2",{attrs:{id:"只触发重绘的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#只触发重绘的属性"}},[t._v("#")]),t._v(" 只触发重绘的属性")]),t._v(" "),s("ul",[s("li",[t._v("color")]),t._v(" "),s("li",[t._v("border-style")]),t._v(" "),s("li",[t._v("border-radius")]),t._v(" "),s("li",[t._v("visibility")]),t._v(" "),s("li",[t._v("text-decoration")]),t._v(" "),s("li",[t._v("background")]),t._v(" "),s("li",[t._v("background-image")]),t._v(" "),s("li",[t._v("background-position")]),t._v(" "),s("li",[t._v("background-repeat")]),t._v(" "),s("li",[t._v("background-size")]),t._v(" "),s("li",[t._v("outline-color")]),t._v(" "),s("li",[t._v("outline")]),t._v(" "),s("li",[t._v("outline-style")]),t._v(" "),s("li",[t._v("outline-width")]),t._v(" "),s("li",[t._v("box-shadow")])]),t._v(" "),s("h2",{attrs:{id:"如何优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何优化"}},[t._v("#")]),t._v(" 如何优化")]),t._v(" "),s("ol",[s("li",[t._v("避免使用触发重绘，回流的css属性。")])]),t._v(" "),s("ul",[s("li",[t._v("用translate替代top。 translate不会触发回流。")]),t._v(" "),s("li",[t._v("用opacity替代visibility。 opacity不会触发回流和重绘。")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("将重绘，回流的影响范围限制在单独的图层之内。\n给需要频繁更新的元素设置 transtrom， will-change属性，这时会新建一个图层。\n他们的回流重绘不会影响其他图层。")])]),t._v(" "),s("li",[s("p",[t._v("不要一条一条地修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 className")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".action {\n  width:'100px';\n  height:'100px';\n  top: '100px';\n}\n\ndiv.className = 'action';\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[t._v("把 DOM 离线后修改，比如：先把 DOM 给 display:none (有一次 Reflow)，\n然后你修改100次，然后再把它显示出来.\n因为修改display:none 的元素不会触发回流重绘。")])]),t._v(" "),s("li",[s("p",[t._v("不要在循环里读取位置属性，例如offsetHeight,offsetWidth, clientHeight, clientWidth.")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" doms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" doms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" clientHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" doms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局")]),t._v(" "),s("li",[t._v("动画实现的速度的选择")]),t._v(" "),s("li",[t._v("对于动画新建图层")]),t._v(" "),s("li",[t._v("使用 transform:translateZ(0) transform:translate3d(0,0,0) 启用 GPU 硬件加速.")])])])}),[],!1,null,null,null);a.default=n.exports}}]);