<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 性能优化 | 前端知识</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="主要记录自己对前端知识的梳理和理解。">
    
    <link rel="preload" href="/frontend-knowledge/assets/css/0.styles.1d57cce0.css" as="style"><link rel="preload" href="/frontend-knowledge/assets/js/app.1cec9800.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/2.62f2d1a2.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/167.c6d029fe.js" as="script"><link rel="prefetch" href="/frontend-knowledge/assets/js/10.cb033405.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/100.1cfff20c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/101.c97c0c53.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/102.237855a3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/103.dbdb89f8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/104.00061043.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/105.a017b90d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/106.fb789a3f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/107.b1260f64.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/108.33366212.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/109.fc62621d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/11.8c9f002b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/110.fb1d9ac5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/111.d29372e8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/112.f1f07bd4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/113.2c77f34a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/114.85c7dfa6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/115.0bdebd25.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/116.c4fe9386.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/117.a61712b5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/118.0494a6f2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/119.4f7c25e4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/12.ba510af0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/120.dae02a41.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/121.79870164.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/122.797f4971.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/123.f96ce342.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/124.4f98c7a3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/125.6da5159e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/126.f3ee9ce4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/127.70c619d4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/128.2abac1af.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/129.d07e5ad2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/13.637e528b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/130.9106a2d0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/131.1451a800.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/132.2e916197.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/133.b5553de4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/134.5318386e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/135.66095667.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/136.4c05537e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/137.b6b7dd8b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/138.74c0af7e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/139.ac96ae2f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/14.90b448a1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/140.53ea5125.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/141.ffdb5f6a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/142.39ad7c99.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/143.a27f0573.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/144.096c30d2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/145.ea5e31c1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/146.8b18bddc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/147.95977d6c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/148.b01ff29a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/149.ace56f69.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/15.77d6091c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/150.2baf0f19.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/151.82fd6c6d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/152.fa3693c5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/153.9f7fed2d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/154.c5c3e87a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/155.5a6c76bc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/156.fdf49347.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/157.20b62dea.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/158.e37460a2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/159.75796385.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/16.e09fb518.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/160.8bc94acd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/161.d7e5ae15.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/162.60ed76e1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/163.8646d8e0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/164.d4fc32f9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/165.0cfbe217.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/166.46703943.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/168.923268ef.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/169.3c989f4a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/17.16097bc0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/170.8c60ad04.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/171.c05ceceb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/172.f8810bf2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/173.a53691cd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/174.3ff02851.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/175.50a74e3a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/176.61465fb4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/177.5cd75c2e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/178.f8fff93e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/179.8d0e66ff.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/18.72a03825.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/180.89bd8312.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/181.31ae395f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/182.c27ed932.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/183.dbf6842b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/184.1715511f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/185.5b2bdf63.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/186.d41e855e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/187.def73b08.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/188.81386d52.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/189.cf60dd1b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/19.168b850f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/190.9bd39119.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/191.59bf97e9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/192.edea6b4f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/193.219d51c9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/194.412d0b1b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/195.d3ac99d3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/196.acf5709e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/197.c38f3281.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/198.1ed50c4f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/199.59c4d671.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/20.f3c9ee84.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/200.414c6059.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/201.a3784797.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/202.4f810b3c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/203.408f92f6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/204.a1a392a4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/205.fce0c3f1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/206.33527f58.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/207.ea6e0171.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/208.4d3e0b4c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/209.d2c41966.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/21.ca8fbfb4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/210.d4395409.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/211.b296df72.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/212.a83461de.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/213.f1bc16b0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/214.d8d6938f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/215.395b8a63.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/216.82888203.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/217.179c368f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/218.83d414e7.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/219.cbceaf29.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/22.f6ef8b1a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/220.ed3e0796.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/221.ab8a62a7.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/222.1c7b49a4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/223.c096efe5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/224.3e09f9eb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/225.3fd70805.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/226.ec7508c0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/227.637f1b97.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/228.59312113.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/229.c7f07759.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/23.29283229.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/230.e6020f41.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/231.c77ba663.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/232.4bb02977.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/233.665eb219.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/234.c5067b90.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/235.c75d0784.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/236.1be515ac.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/237.3d43316e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/238.6133fc57.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/239.a9371c48.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/24.cb3dc1d7.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/240.b5776c7d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/241.981927fa.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/242.20ba7daa.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/243.42989149.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/244.a4570442.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/245.47c0e154.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/246.82aaff0e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/247.1ba5f6e2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/248.6753411f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/249.994b9a6f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/25.557f489f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/250.da5b251a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/251.a294cd86.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/252.cdf046f6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/253.3f9b31a5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/254.edfcddbf.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/255.0128a2a0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/256.962d475b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/257.499baef8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/258.102ed941.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/259.5f0a92a0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/26.3f3fe69b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/260.0a16e6a4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/261.1cde38ed.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/262.41c5402f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/263.4731e25c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/264.cf1fe0df.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/265.09c6ac75.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/266.fce79351.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/267.69157382.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/268.e4bb0bd9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/269.3858d043.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/27.bcbf82e8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/270.cfe1dcff.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/271.e995a15a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/272.cb3d6d20.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/273.343cc22e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/274.b17cf9ba.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/275.487cedd6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/276.cbfa007d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/277.63122c08.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/278.9afccf40.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/279.db8bf846.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/28.5fdfdb80.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/280.da0754b0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/281.45df2da6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/282.7b1eca6c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/283.b1f352e4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/284.37935505.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/285.3bfd697e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/286.3a414954.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/287.68a6dd0a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/288.9a47aa20.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/289.b8ce07f4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/29.b3396301.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/290.768317ef.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/291.77bd7840.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/292.03c83bde.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/293.1aec6f12.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/294.cc368294.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/295.dce0a4d8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/296.62a37217.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/297.e28c003a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/298.e5f07135.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/299.3672ed89.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/3.e514da99.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/30.52b3e8ca.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/300.62cf5c02.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/301.1a88fc63.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/302.ce627bbb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/303.f1d2d6e0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/304.6118b9d9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/305.a0a24fc1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/306.e7ba31fa.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/307.0eda022d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/308.93fbfeb0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/309.0555823d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/31.20c853ca.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/310.06f1f230.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/311.4d7c1965.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/312.5e59a6b3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/313.91d3df87.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/314.f75563fd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/315.1b46bfc9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/316.1867c5b2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/317.5d683392.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/318.d1d9d294.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/319.02661749.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/32.df94b6c0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/320.25cf59ef.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/321.22403905.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/322.2a3d4201.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/323.aa2da01e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/324.b3c44f88.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/325.44895731.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/326.b6ffafb2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/327.db274c55.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/328.903cf082.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/329.94fbe02d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/33.5046ef25.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/330.49a1fa5c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/34.b55746e5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/35.628c630c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/36.36029402.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/37.6a6af327.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/38.71ec4eae.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/39.dfe5806e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/4.80bc7d2f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/40.af0d3322.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/41.af2f1923.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/42.660e0643.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/43.297c68dc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/44.86d4c424.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/45.03720ba1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/46.7fe4fb02.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/47.84a62c3f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/48.8df2c3da.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/49.77c64bf5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/5.5b93ae0c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/50.b7ef823a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/51.2c9a2a94.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/52.bb65d789.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/53.bafeebdc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/54.b0abb0ac.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/55.932377b4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/56.f8bb49eb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/57.b3f98972.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/58.21e321bd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/59.419939fc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/6.5fc845fb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/60.08d74b08.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/61.da8730c3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/62.de6e9ccf.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/63.d909565b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/64.b63aa715.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/65.a703cbf4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/66.bbec4239.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/67.49af75ab.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/68.73a24712.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/69.3a0bbbb7.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/7.34dc28a0.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/70.6f5e2ccc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/71.ad8223da.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/72.ea8977cc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/73.b77b19dd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/74.10c48b8c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/75.e46837ec.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/76.7ac7b14e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/77.2571d098.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/78.422d13be.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/79.3450baad.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/8.8c982acf.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/80.08cef119.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/81.a65707d1.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/82.726f9fa4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/83.6e9a522d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/84.2f4e2ac3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/85.298ebf0a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/86.d2d96d0c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/87.140cbd00.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/88.3cd8a951.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/89.4122850b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/9.640b0c71.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/90.e2c4d923.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/91.04ddd332.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/92.f1b75ce7.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/93.e22216da.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/94.3bd3e162.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/95.6159a545.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/96.ec28b8cd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/97.6f56bda9.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/98.6b40d328.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/99.87f07f04.js">
    <link rel="stylesheet" href="/frontend-knowledge/assets/css/0.styles.1d57cce0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge/" class="home-link router-link-active"><!----> <span class="site-name">前端知识</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/chuckbass2121/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/chuckbass2121/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NodeJS</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/frontend-knowledge/" aria-current="page" class="sidebar-link">README.md</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实践篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>性能优化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/性能优化/React性能优化.html" class="sidebar-link">React性能优化.md</a></li><li><a href="/frontend-knowledge/性能优化/Web图片优化.html" class="sidebar-link">Web图片优化.md</a></li><li><a href="/frontend-knowledge/性能优化/webpack性能优化.html" class="active sidebar-link">webpack性能优化.md</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#分析打包速度" class="sidebar-link">分析打包速度</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#分析影响打包速度环节" class="sidebar-link">分析影响打包速度环节</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#优化搜索时间" class="sidebar-link">优化搜索时间</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#优化解析时间" class="sidebar-link">优化解析时间</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#优化压缩时间" class="sidebar-link">优化压缩时间</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/性能优化/webpack性能优化.html#优化二次打包时间" class="sidebar-link">优化二次打包时间</a></li></ul></li><li><a href="/frontend-knowledge/性能优化/异步加载.html" class="sidebar-link">异步加载.md</a></li><li><a href="/frontend-knowledge/性能优化/性能优化.html" class="sidebar-link">性能优化.md</a></li><li><a href="/frontend-knowledge/性能优化/浏览器缓存.html" class="sidebar-link">浏览器缓存.md</a></li><li><a href="/frontend-knowledge/性能优化/聊聊如何搭建高性能网站.html" class="sidebar-link">聊聊如何搭建高性能网站.md</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>手写代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模块化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器渲染</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>真题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>错误监控</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-性能优化"><a href="#webpack-性能优化" class="header-anchor">#</a> webpack 性能优化</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p>webpack 打包优化并没有什么固定的模式，一般我们常见的有话就是拆包、分块、压缩等，并不是对每一个项目都适用，针对特定项目，需要不断调试不断优化。</p> <p>对于 webpack4，建议从零开始配置，在项目初期使用 webpack4 默认的配置。</p></blockquote> <h2 id="分析打包速度"><a href="#分析打包速度" class="header-anchor">#</a> 分析打包速度</h2> <p>优化 webpack 构建速度的第一步是知道需要将精力集中在哪里。我们可以通过 speed-measure-webpack-plugin 测量你的 webpack 构建期间各个阶段花费的时间：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> SpeedMeasurePlugin <span class="token keyword">from</span> <span class="token string">'speed-measure-webpack-plugin'</span>

<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre></div><h2 id="分析影响打包速度环节"><a href="#分析影响打包速度环节" class="header-anchor">#</a> 分析影响打包速度环节</h2> <ol><li><p><strong>开始打包，我们需要获取所有的依赖模块</strong></p> <p>搜索所有的依赖模块，这需要占用一定的时间，即我们优化的第一个时间是 <strong>搜索时间</strong>。</p></li> <li><p><strong>解析所有的依赖模块（解析成浏览器可运行的代码）</strong></p> <p>webpack 根据我们配置的 loader 解析相应的文件。日常开发中我们需要使用 loader 对 js、css、图片、字体等文件进行转换处理，并且转换处理的文件的数量也是十分大。由于 js 单线程的特性使得这些操作不能并发处理，而是需要一个个文件处理。</p> <p>所以我们需要优化的第二个时间是 <strong>解析时间</strong>。</p></li> <li><p><strong>将所有依赖模块打包到一个文件</strong></p> <p>将所有解析完成的代码，打包到一个文件中，为了使浏览器加载的包更小（减少白屏时间），所以 webpack 会对代码进行优化。</p> <p>JS 压缩时发布编译的最后阶段，时间耗费会比较久，因为压缩 JS 需要将代码解析成 AST 语法树，然后根据复杂的规则去解析和处理 AST，最后将 AST 还原回 JS。</p> <p>所以我们需要优化的第三个时间是 <strong>压缩时间</strong>。</p></li> <li><p><strong>二次打包</strong></p> <p>当我们只改动了项目中的一个小小的文件，所有文件都会重新打包，但大部分文件并没有变更。</p> <p>所以我们需要优化的第四个时间是 <strong>二次打包时间</strong>。</p></li></ol> <h2 id="优化搜索时间"><a href="#优化搜索时间" class="header-anchor">#</a> 优化搜索时间</h2> <blockquote><p>缩小文件搜索范围，减少不必要的编译工作</p></blockquote> <p>webpack 打包时，会从配置的 entry 出发，解析入口文件的导入语句，再递归解析。</p> <p>在遇到导入语句时，webpack 会做两件事情：</p> <ul><li>根据导入语句去寻找对应的要导入的文件；</li> <li>根据找到要导入文件的后缀，使用配置中的 loader 去处理文件。例如：使用了 ES Next 语法需要用到 babel-loader。</li></ul> <p>这两件事情一旦项目文件数量增多，速度会显著降低，所以虽然无法避免以上两件事情，但是可以尽量减少事情的发生以提高速度。</p> <ol><li><p><strong>优化 loader 配置</strong></p> <p>使用 loader 时可以通过 test、include、exclude 三个配置项来命中 loader 要应用规则的文件；</p></li> <li><p><strong>优化 resolve.modules 配置</strong></p> <p>resolve.modules 用于配置 webpack 去哪些目录下寻找第三方模块，resolve.modules 的默认值是 ['node_modules']，含义是先去当前目录下的 ./node_modules 寻找，没有找到就去上一级目录中找，一路递归；</p></li> <li><p><strong>优化 resolve.alias 配置</strong></p> <p>resolve.alias 配置项通过别名来把原导入路径映射成新的导入路径，减少耗时的递归解析操作；</p></li> <li><p><strong>优化 resolve.extensions 配置</strong></p> <p>在导入语句中没带文件后缀时，webpack 会根据 resolve.extensions 自动带上后缀去尝试询问文件是否存在，所以配置 resolve.extensions 应注意：</p> <ul><li>resolve.extensions 列表要尽可能小，不要把不存在的后缀添加进去；</li> <li>高频后缀名放在前面，以便尽快退出超找过程；</li> <li>在写代码时，尽可能带上后缀名，从而避免寻找过程。</li></ul></li> <li><p><strong>优化 resolve.mainFields 配置</strong></p> <p>有一些第三方模块会针对不同环境提供几分代码，路径一般会写在 package.json 中。</p> <p>webpack 会根据 mainFields 中配置去决定优先采用哪份代码，只会使用找到的第一个。</p></li> <li><p><strong>优化 module.noParse 配置</strong></p> <p>module.noParse 配置项可以让 webpack 忽略对部分没采用模块化的文件的递归处理，这样做的好处是能提高构建性能。原因是部分年代比较久远的库体积庞大且没有采用模块化标准，让 webpack 去解析这些文件没有任何意义</p></li></ol> <h2 id="优化解析时间"><a href="#优化解析时间" class="header-anchor">#</a> 优化解析时间</h2> <p>运行在 Node.JS 上的 webpack 是单线程模式，也就是说 webpack 打包只能逐个文件处理，当文件数量比较多时，打包时间就会比较漫长，所以我们需要开启多线程来提高解析速度。</p> <h3 id="thread-loader-webpack4-官方推荐"><a href="#thread-loader-webpack4-官方推荐" class="header-anchor">#</a> thread-loader（webpack4 官方推荐）</h3> <p>把这个 loader 放在其他 loader 之前，放置在其之后的 loader 就会在一个单独的 worker【worker pool】池里运行，一个 worker 就是一个 Node.JS 进程，每个单独进程处理时间上限为 600ms，各个进程的数据交换也会限制在这个时间内。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'webpack'</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'thread-loader'</span><span class="token punctuation">,</span> <span class="token string">'babel-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'thread-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意：</strong> 由于工作原理的限制，thread-loader 需要放在 style-loader 之后，原因是 thread-loader 后的 loader 没法存取文件，也没法获取 webpack 的选项配置。</p> <p>官方说每个 worker 大概都要花费 600ms，所以为了防止启动 worker 时的高延迟，提供了对 worker 池的优化：<strong>预热</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> threadLoader <span class="token keyword">from</span> <span class="token string">'thread-loader'</span>

<span class="token keyword">const</span> jsWorkerPool <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 产生的 worker 数量，默认是cpu核心数 - 1</span>
  <span class="token comment">// 当 require('os').cpus() 是 undefined时则为 1</span>
  worker<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
  
  <span class="token comment">// 闲置时定时删除 worker 进程</span>
  <span class="token comment">// 默认为 500ms</span>
  <span class="token comment">// 可以设置为无穷大，监视模式(--watch)下可以保持 worker 持续存在</span>
  poolTimeout<span class="token operator">:</span> <span class="token number">2000</span> 
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cssWorkerPool <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一个 worker 进程中并行执行工作的数量</span>
  <span class="token comment">// 默认为 20</span>
  wokerParallelJobs<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  poolTimeout<span class="token operator">:</span> <span class="token number">2000</span>
<span class="token punctuation">}</span>

threadLoader<span class="token punctuation">.</span><span class="token function">warmup</span><span class="token punctuation">(</span>jsWorkerPool<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
threadLoader<span class="token punctuation">.</span><span class="token function">warmup</span><span class="token punctuation">(</span>cssWorkerPool<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>**注意：**请仅在耗时的 loader 上使用</p> <h2 id="优化压缩时间"><a href="#优化压缩时间" class="header-anchor">#</a> 优化压缩时间</h2> <p>webpack 4 默认使用 terser-webpack-plugin 压缩插件压缩优化代码，该插件使用 terser 来缩小 JavaScript。</p> <h3 id="terser-是什么"><a href="#terser-是什么" class="header-anchor">#</a> terser 是什么</h3> <blockquote><p>官方定义：用于 ES Next 的 JavaScript 解析器、mangler/compressor（压缩器）工具包。</p></blockquote> <p>为什么 webpack 选择 terser</p> <blockquote><p>不再维护 uglify-es，并且 uglify-js 不支持 es6+。</p> <p>terser 时 uglify-es 的一个分支，主要保留了与 uglify-es 和 uglify-js@3 的 API 和 CLI 兼容性。</p></blockquote> <h3 id="启动多进程"><a href="#启动多进程" class="header-anchor">#</a> 启动多进程</h3> <p>使用多进程来并行运行提高构建速度，默认并发数量为 os.cspus().length - 1</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'webpack'</span>
<span class="token keyword">import</span> TerserPlugin <span class="token keyword">from</span> <span class="token string">'terser-webpack-plugin'</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="优化二次打包时间"><a href="#优化二次打包时间" class="header-anchor">#</a> 优化二次打包时间</h2> <p>将改动少的文件缓存起来，二次打包直接读取缓存，显著提升打包时间。</p> <p>使用 webpack 缓存的方法有几种，例如 cache-loader，HardSourceWebpackPlugin 或 babel-loader 的 cacheDirectory 标志。这些缓存方法都有启动开销，重新运行期间在本地节省的时间很大，但是初次启动实际上会更慢。</p> <h3 id="cache-loader"><a href="#cache-loader" class="header-anchor">#</a> cache-loader</h3> <p>和 thread-loader 用法一样，在性能开销比较大的 loader 之前添加此 loader，以将结果缓存到磁盘</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'webpack'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'cache-loader'</span><span class="token punctuation">,</span> <span class="token operator">...</span>loaders<span class="token punctuation">]</span><span class="token punctuation">,</span>
    		include<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="hardsourcewebpackplugin"><a href="#hardsourcewebpackplugin" class="header-anchor">#</a> HardSourceWebpackPlugin</h3> <ul><li>第一次构建将花费正常时间</li> <li>第二次构建将显著加快（大约提升 90% 的构建速度）</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'webpack'</span>
<span class="token keyword">import</span> HardSourceWebpackPlugin <span class="token keyword">from</span> <span class="token string">'hard-source-webpack-plugin'</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-knowledge/性能优化/Web图片优化.html" class="prev">
        Web图片优化.md
      </a></span> <span class="next"><a href="/frontend-knowledge/性能优化/异步加载.html">
        异步加载.md
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-knowledge/assets/js/app.1cec9800.js" defer></script><script src="/frontend-knowledge/assets/js/2.62f2d1a2.js" defer></script><script src="/frontend-knowledge/assets/js/167.c6d029fe.js" defer></script>
  </body>
</html>
